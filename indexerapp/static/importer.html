
<div x-init="importer_init()" class="px-2">

    <h1 class="text-[#0d1b2a] text-[32px] sm:text-[40pt] caudex-bold text-left mt-4 mb-3" >Content importer</h1>
    <h2 class="text-[16pt] text-[#0d1b2a] caudex-bold text-left mb-5">1. Download and fill the file with data:</h2>
    <ul>
        <li><a href="/static/files/Manuscripts_sample.csv">Manuscripts_sample.csv</a></li>
        <li><a href="/static/files/Bibliography_sample.csv">Bibliography_sample.csv</a></li>
        <li><a href="/static/files/Content_sample.csv">Content_sample.csv</a></li> 
        <li><a href="/static/files/EditionContent_sample.csv">EditionContent_sample.csv</a></li> 
        <li><a href="/static/files/Formulas_sample.csv">Formulas_sample.csv</a></li> 
        <li><a href="/static/files/Manuscripts_sample.csv">Manuscripts_sample.csv</a></li> 
        <li><a href="/static/files/RiteNames_sample.csv">RiteNames_sample.csv</a></li> 
        <li><a href="/static/files/TimeReference_sample.csv">TimeReference_sample.csv</a></li>
    </ul>

    or use the <a href="/static/page.html?p=catalogue_parser" style="color:blue">Catalogue Parser</a> to generate the .csv file from the catalogue text.

    <h2 class="text-[16pt] text-[#0d1b2a] caudex-bold text-left mb-5">2. Upload .csv file:</h2>
    <p>Drag & drop file below, or click and select it using system file browser.</p>
    <div id="upload-container" onclick="browseFile()" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event)">
        <p>Upload .csv</p>
        <input type="file" id="file-input" style="display: none" onchange="handleFile()">
    </div>

    <h2 class="text-[16pt] text-[#0d1b2a] caudex-bold text-left mb-5">3. Check the data:</h2>
    <div id="ms_selector">
        <h3>3.1. Select manuscript:</h3>
        <label for="ms_select">Manuscript:</label>
        <select class="manuscript_filter" id="ms_select">
        </select>
        <button class="py-2 text-[#0d1b2a] font-semibold shadow drop-shadow-md bg-[#e8d3c3] rounded w-[200px] hover:bg-[#dec5b2] text-center mt-7" id="download-csv-from-server" onclick="downloadContentCSV()" style="display: none">Download data from the server as .csv</button>
        <button class="py-2 text-[#0d1b2a] font-semibold shadow drop-shadow-md bg-[#e8d3c3] rounded w-[200px] hover:bg-[#dec5b2] text-center mt-7" id="delete-ms-content" onclick="deleteMSContent()" style="display: none">Delete all content</button>
    </div>

    <div id="contributor_selector">
        <h3>3.2. Select contributor:</h3>
        <label for="contributor_select">Contributor:</label>
        <select class="contributor_filter" id="contributor_select">
        </select>
    </div>


    <table id="data-table" style="display: none">
        <!-- Table content will be dynamically generated here -->
    </table>

    <p id="error-info"></p>
    <p id="loading-info">Sending data... please wait. Do NOT close this window</p>
    
    <h2 class="text-[16pt] text-[#0d1b2a] caudex-bold text-left mb-5" >4. Send data to the database:</h2>
    <button class="py-2 text-[#0d1b2a] font-semibold shadow drop-shadow-md bg-[#e8d3c3] rounded w-[200px] hover:bg-[#dec5b2] text-center mt-7" id="send-to-server" onclick="sendToServer()" style="display: none">Send to database</button>
    
    <div id="tradition_selector">
        <h2 class="text-[16pt] text-[#0d1b2a] caudex-bold text-left mb-5" >5. Assign ms content to the tradition (Optional):</h2>
        <label for="ms_select">Tradition:</label>
        <select class="tradition_filter" id="tradition_select">
        </select>
        <button class="py-2 text-[#0d1b2a] font-semibold shadow drop-shadow-md bg-[#e8d3c3] rounded w-[200px] hover:bg-[#dec5b2] text-center mt-7" id="content-to-tradition" onclick="assignMSContentToTheTradition()" style="display: none">Assign all content from MS to the tradition</button>
        <button class="py-2 text-[#0d1b2a] font-semibold shadow drop-shadow-md bg-[#e8d3c3] rounded w-[200px] hover:bg-[#dec5b2] text-center mt-7" id="delete-tradition-content" onclick="deleteTraditionContent()" style="display: none">Delete tradition content</button>

    </div>
    
</div>